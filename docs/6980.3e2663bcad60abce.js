"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6980],{6980:(T,h,r)=>{r.r(h),r.d(h,{CurrentWeatherModule:()=>v});var s=r(6895),l=r(655),d=r(6090),t=r(8256),p=r(2574),m=r(5738),g=r(343),a=r(7575),f=r(7442);function C(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"ion-card",1)(1,"ion-card-header",2),t._UZ(2,"i",3),t.TgZ(3,"span"),t._uU(4),t.qZA()(),t.TgZ(5,"ion-card-content",4)(6,"div",5)(7,"div",6),t._UZ(8,"img",7),t.qZA(),t.TgZ(9,"h1"),t._uU(10),t.ALo(11,"number"),t.TgZ(12,"sup"),t._uU(13,"\xb0C"),t.qZA()(),t.TgZ(14,"h2"),t._uU(15),t.qZA()(),t.TgZ(16,"div",8)(17,"div",9),t._UZ(18,"i",10),t.TgZ(19,"div",11)(20,"span",12),t._uU(21),t.ALo(22,"number"),t.qZA(),t.TgZ(23,"span",13),t._uU(24,"Humedad"),t.qZA()()(),t.TgZ(25,"div",9),t._UZ(26,"i",14),t.TgZ(27,"div",11)(28,"span",12),t._uU(29),t.ALo(30,"number"),t.qZA(),t.TgZ(31,"span",13),t._uU(32,"Viento"),t.qZA()()()()(),t.TgZ(33,"div",15)(34,"ion-button",16),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.navigate())}),t._uU(35,"Ver Pronostico"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(4),t.AsE("",e.currentWeather.location.name,", ",e.currentWeather.location.region,""),t.xp6(4),t.Q6J("src",e.getIcon(e.currentWeather.current.condition.code),t.LSH),t.xp6(2),t.hij(" ",t.xi3(11,7,e.currentWeather.current.temp_c,"1.0-0")," "),t.xp6(5),t.hij(" ",e.getCondition(e.currentWeather.current.condition.code)," "),t.xp6(6),t.hij("",t.xi3(22,10,e.currentWeather.current.humidity,"1.0-0"),"%"),t.xp6(8),t.hij("",t.xi3(30,13,e.currentWeather.current.wind_kph,"1.0-0")," Km/h")}}function _(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"ion-button",16),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.getWeather())}),t._UZ(1,"i",19),t.qZA()}}function Z(n,c){1&n&&t._UZ(0,"ion-progress-bar",20)}function x(n,c){if(1&n&&(t.TgZ(0,"ion-card",1)(1,"ion-card-header",2),t._UZ(2,"i",3),t.TgZ(3,"span"),t._uU(4," --- "),t.qZA()(),t.TgZ(5,"ion-card-content",4)(6,"div",5)(7,"div",6),t._UZ(8,"img",7),t.qZA(),t.TgZ(9,"h1"),t._uU(10,"-- "),t.TgZ(11,"sup"),t._uU(12,"\xb0C"),t.qZA()(),t.TgZ(13,"h2"),t._uU(14,"--"),t.qZA()(),t.TgZ(15,"div",8)(16,"div",9),t._UZ(17,"i",10),t.TgZ(18,"div",11)(19,"span",12),t._uU(20,"--%"),t.qZA(),t.TgZ(21,"span",13),t._uU(22,"Humedad"),t.qZA()()(),t.TgZ(23,"div",9),t._UZ(24,"i",14),t.TgZ(25,"div",11)(26,"span",12),t._uU(27,"-- Km/h"),t.qZA(),t.TgZ(28,"span",13),t._uU(29,"Viento"),t.qZA()()()()(),t.TgZ(30,"div",15),t.YNc(31,_,2,0,"ion-button",17),t.YNc(32,Z,1,0,"ion-progress-bar",18),t.qZA()()),2&n){const e=t.oxw();t.xp6(8),t.Q6J("src",e.getDefaultIcon(),t.LSH),t.xp6(23),t.Q6J("ngIf",e.isLoad&&!e.granted),t.xp6(1),t.Q6J("ngIf",!e.isLoad||!e.isLoad&&e.granted)}}const w=[{path:"",component:(()=>{class n{constructor(e,o,i,P,M,y){this.weatherService=e,this.weatherConditionService=o,this.router=i,this.toastController=P,this.platform=M,this.openNativeSettings=y,this.currentWeather={location:{name:"",region:"",country:"",lat:0,lon:0,tz_id:"",localtime_epoch:0,localtime:""},current:{temp_c:0,is_day:0,condition:{text:"",icon:"",code:0},wind_kph:0,humidity:0}},this.isLoad=!1,this.granted=!1}ngOnInit(){this.getWeather(),this.interval=setInterval(()=>{this.getWeather()},3e5)}ionViewDidLeave(){clearInterval(this.interval)}getWeather(){return(0,l.mG)(this,void 0,void 0,function*(){this.isLoad=!1;try{const e=yield d.b.checkPermissions();console.log("checkPermissions()","granted"==e.location),this.granted="granted"==e.location}catch(e){console.log(e)}if(this.platform.is("capacitor")&&!this.granted)try{const e=yield d.b.requestPermissions();console.log("requestPermissions()","granted"==e.location),this.granted="granted"==e.location}catch(e){console.log(e)}if(this.granted){let e;try{e=yield d.b.getCurrentPosition()}catch(o){this.presentToast()}this.weatherService.setCoords(e),this.weatherService.getWeather().subscribe(o=>{this.currentWeather=o,this.isLoad=!0,document.body.setAttribute("color-theme",this.currentWeather.current.is_day?"":"dark")})}else this.presentToast(),this.isLoad=!0})}getIcon(e){let o="";return this.isLoad&&(o=`./assets/${this.currentWeather.current.is_day?"day":"night"}/${this.weatherConditionService.getCondition(e).icon}.png`),o}getDefaultIcon(){return"./assets/day/113.png"}getCondition(e){let o="";if(this.isLoad){const i=this.weatherConditionService.getCondition(e);o=this.currentWeather.current.is_day?i.day:i.night}return o}navigate(){this.router.navigate(["/forecast"])}presentToast(){return(0,l.mG)(this,void 0,void 0,function*(){let e=[];this.platform.is("capacitor")&&(e=[{text:"Activar",role:"info",handler:()=>{this.openNativeSettings.open("application_details").then(i=>console.log(i))}}]),yield(yield this.toastController.create({message:"Se necesitan permisos",duration:1500,position:"bottom",buttons:e})).present()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.F),t.Y36(m.x),t.Y36(g.F0),t.Y36(a.yF),t.Y36(a.t4),t.Y36(f.Q))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-current-weather"]],decls:2,vars:2,consts:[["class","weather-card","color","light",4,"ngIf"],["color","light",1,"weather-card"],[1,"weather-location"],[1,"fa-solid","fa-location-pin"],[1,"weather-content"],[1,"weather-time"],[1,"weather-img"],["alt","",3,"src"],[1,"weather-stats"],[1,"weather-stat"],[1,"fa-solid","fa-droplet"],[1,"stat-text"],[1,"stat-value"],[1,"stat-description"],[1,"fa-solid","fa-wind"],[1,"weather-card-buttons"],["expand","block","fill","clear",3,"click"],["expand","block","fill","clear",3,"click",4,"ngIf"],["type","indeterminate",4,"ngIf"],[1,"fa-solid","fa-rotate-right"],["type","indeterminate"]],template:function(e,o){1&e&&(t.YNc(0,C,36,16,"ion-card",0),t.YNc(1,x,33,3,"ion-card",0)),2&e&&(t.Q6J("ngIf",o.isLoad&&o.granted),t.xp6(1),t.Q6J("ngIf",!o.granted||!o.isLoad&&o.granted))},dependencies:[a.YG,a.PM,a.FN,a.Zi,a.X7,s.O5,s.JJ],styles:[".weather-card[_ngcontent-%COMP%]{min-height:calc(100vh - 48px);width:calc(100% - 32px);max-width:1000px;display:flex;flex-direction:column;align-self:center;transition:background 1s,color 1s}.weather-card-buttons[_ngcontent-%COMP%]{margin-top:auto}.weather-location[_ngcontent-%COMP%]{display:flex;flex-direction:row}.weather-location[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.weather-location[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1rem;padding-left:5px}.weather-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:auto}.weather-time[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.weather-time[_ngcontent-%COMP%]   .weather-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;max-width:100%;width:70%;min-width:150px;margin:auto;padding-bottom:20px}.weather-time[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .weather-time[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0!important;padding:0!important}.weather-time[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3rem;font-weight:700}.weather-time[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   sup[_ngcontent-%COMP%]{font-size:2rem}.weather-time[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem!important}.weather-stats[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-around;width:100%;flex-wrap:wrap;margin-top:50px}.weather-stats[_ngcontent-%COMP%]   .weather-stat[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;column-gap:15px}.weather-stats[_ngcontent-%COMP%]   .stat-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:1.1rem;padding-left:15px}.weather-stats[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.weather-stats[_ngcontent-%COMP%]   .stat-description[_ngcontent-%COMP%]{font-size:.7em}.weather-stats[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-weight:700}"]}),n})()}];let v=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[a.Pc,g.Bz.forChild(w),s.ez]}),n})()}}]);