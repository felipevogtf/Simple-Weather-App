"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[430],{430:(P,h,s)=>{s.r(h),s.d(h,{ForecastModule:()=>w});var c=s(6895),m=s(343),r=s(7575),f=s(655),l=s(6090),t=s(8256),u=s(2574),y=s(5738),v=s(7442);function C(o,a){if(1&o&&(t.TgZ(0,"ion-item",6)(1,"ion-label"),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"div",7),t._UZ(5,"img",8),t.TgZ(6,"span"),t._uU(7),t.ALo(8,"number"),t.ALo(9,"number"),t.TgZ(10,"sup"),t._uU(11,"\xb0C"),t.qZA()()()()),2&o){const e=a.$implicit,i=t.oxw();t.xp6(2),t.Oqu(t.xi3(3,4,e.date,"cccc")),t.xp6(3),t.Q6J("src",i.getIcon(e.day.condition.code),t.LSH),t.xp6(2),t.AsE(" ",t.xi3(8,7,e.day.mintemp_c,"1.0-0")," / ",t.xi3(9,10,e.day.maxtemp_c,"1.0-0")," ")}}function x(o,a){1&o&&t._UZ(0,"ion-progress-bar",9)}const F=[{path:"",component:(()=>{class o{constructor(e,i,n,d,p,b){this.weatherService=e,this.weatherConditionService=i,this.router=n,this.toastController=d,this.platform=p,this.openNativeSettings=b,this.forecast={location:{name:"",region:"",country:"",lat:0,lon:0,tz_id:"",localtime_epoch:0,localtime:""},current:{temp_c:0,is_day:0,condition:{text:"",icon:"",code:0},wind_mph:0,wind_kph:0,humidity:0},forecast:{forecastday:[]}},this.isLoad=!1}ngOnInit(){this.getForecast()}getForecast(){return(0,f.mG)(this,void 0,void 0,function*(){let e=!1;try{const n=yield l.b.checkPermissions();console.log("checkPermissions()","granted"==n.location),e="granted"==n.location}catch(n){console.log(n)}if(this.platform.is("capacitor")&&!e)try{const n=yield l.b.requestPermissions();console.log("requestPermissions()","granted"==n.location),e="granted"==n.location}catch(n){console.log(n)}if(e){let n;try{n=yield l.b.getCurrentPosition()}catch(d){this.presentToast()}this.weatherService.getForecast().subscribe(d=>{this.forecast=d,this.isLoad=!0,document.body.setAttribute("color-theme",this.forecast.current.is_day?"":"dark")})}else this.presentToast();const i=yield l.b.getCurrentPosition();this.weatherService.setCoords(i)})}getIcon(e){let i="";return this.isLoad&&(i=`./assets/day/${this.weatherConditionService.getCondition(e).icon}.png`),i}navigate(){this.router.navigate(["/"])}presentToast(){return(0,f.mG)(this,void 0,void 0,function*(){let e=[];this.platform.is("capacitor")&&(e=[{text:"Activar",role:"info",handler:()=>{this.openNativeSettings.open("application_details").then(n=>console.log(n))}}]),yield(yield this.toastController.create({message:"Se necesitan permisos",duration:1500,position:"bottom",buttons:e})).present()})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(u.F),t.Y36(y.x),t.Y36(m.F0),t.Y36(r.yF),t.Y36(r.t4),t.Y36(v.Q))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-forecast"]],decls:6,vars:2,consts:[["color","light",1,"forecast-card"],["fill","clear",1,"back-button",3,"click"],[1,"fa-solid","fa-arrow-left"],["lines","full"],["color","light",4,"ngFor","ngForOf"],["type","indeterminate","class","forecast-load",4,"ngIf"],["color","light"],["slot","end",1,"forecast-weather"],["alt","",2,"width","30px",3,"src"],["type","indeterminate",1,"forecast-load"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-card",0)(1,"ion-button",1),t.NdJ("click",function(){return i.navigate()}),t._UZ(2,"i",2),t.qZA(),t.TgZ(3,"ion-list",3),t.YNc(4,C,12,13,"ion-item",4),t.qZA(),t.YNc(5,x,1,0,"ion-progress-bar",5),t.qZA()),2&e&&(t.xp6(4),t.Q6J("ngForOf",i.forecast.forecast.forecastday),t.xp6(1),t.Q6J("ngIf",!i.isLoad))},dependencies:[r.YG,r.PM,r.Ie,r.Q$,r.q_,r.X7,c.sg,c.O5,c.JJ,c.uU],styles:[".forecast-card[_ngcontent-%COMP%]{min-height:calc(100vh - 48px);width:calc(100% - 32px);max-width:1000px;display:flex;flex-direction:column;align-self:center}.forecast-weather[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:10px 0;align-items:center}.forecast-weather[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-top:5px;font-weight:600;font-size:.8rem}.forecast-weather[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   sup[_ngcontent-%COMP%]{top:-.2rem}.forecast-load[_ngcontent-%COMP%]{margin-top:auto}.back-button[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}"]}),o})()}];let w=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[r.Pc,m.Bz.forChild(F),c.ez]}),o})()}}]);